<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Writer App</title>

    <script src="/public/tinymce/js/tinymce/tinymce.min.js"></script>
    
    <link rel="stylesheet" href="/public/tinymce/js/tinymce/skins/ui/oxide-dark/content.min.css">
    <link rel="stylesheet" href="/public/bootstrap-5.1.3/dist/css/bootstrap.min.css">
    <script src="/public/bootstrap-5.1.3/dist/js/bootstrap.min.js"></script>
</head>
<body>
    <h1>
        Writer-App
    </h1>

    <textarea name="editor"></textarea>
    <br>
    <div style="display: flex;">
        <form id = "download" action="/download" method="POST">
            <input type="hidden" name="content" id="content" value="">
            <button type="download" id="download-btn" style="margin-right: 20px;">Download file</button>
        </form>
    
        <form method="POST" action="/upload" enctype="multipart/form-data">
            <input type="file" name="htmlfile" />
            <button type="submit" style="margin-right: 20px;">Upload file</button>
        </form>

        <form id = "downloadFileWord" action="/downloadfileword" method="POST">
            <input type="hidden" name="contentfileword" id="contentfileword" value="">
            <button type="download" id="download-btn" style="margin-right: 20px;">Download File Word</button>
        </form>
    </div>


    <script src="/public/js/tinymce.js"></script>

    <script>
        var editor = tinymce.init({
            selector: 'textarea[name="editor"]',
            height: 500,
            content_css: '/styles.css',
            plugins:[
            'advlist', 'autolink', 'link', 'image', 'lists', 'charmap', 'prewiew', 'anchor', 'pagebreak',
            'searchreplace', 'wordcount', 'visualblocks', 'code', 'fullscreen', 'insertdatetime', 'media',
            'table', 'emoticons', 'template', 'codesample'],
            toolbar: 'undo redo | styles | bold italic underline | alignleft aligncenter alignright alignjustify |' +
                'bullist numlist outdent indent | link image | print preview media fullscreen | ' +
                'forecolor backcolor emoticons',
            setup: function (editor) {
                function updateContent() {
                    var content = editor.getContent();
                    document.getElementById('content').value = content;
                    document.getElementById('contentfileword').value = content;
                }

                editor.on('input', updateContent);
                editor.on('change', updateContent);
                editor.on('paste', updateContent);
            },
            init_instance_callback: function (editor) {
                editor.setContent('<%- content %>');
            }
        });
      </script>
    
</body>
<body>

</body>
</html>
